"use client";

import { sva } from "styled-system/css";
import { PaltSettingsContainer } from "./PaltSettingContainer";
import { useTranslations } from "next-intl";
import { HeaderHands } from "./HeaderHands";
import { useRef } from "react";
import { HeaderAnimationIntro } from "./HeaderAnimations";
import { motion } from "framer-motion";

const headerStyles = sva({
  slots: [
    "wrapper",
    "logoContainer",
    "logo",
    "titleJapanese",
    "description",
    "time",
    "hand1",
    "hand2",
  ],
  base: {
    wrapper: {
      position: "relative",
      height: "100svh",
      whiteSpace: "pre-wrap",
      zIndex: 1,
    },
    logoContainer: {
      position: "relative",
      height: "100%",
      padding: "28px",
      display: "grid",
      gridTemplateColumns: "repeat(5, 1fr)",
      lgDown: {
        padding: "8px",
      },
    },
    logo: {
      gridColumn: "1 / span 5",
      width: "100%",
      maxWidth: "78vh",
      display: "flex",
      justifyContent: "space-between",
      flexDirection: "column",
      height: "100%",
      "& > span > svg": {
        width: "100%",
        height: "auto",
      },
    },
    titleJapanese: {
      position: "absolute",
      top: "50%",
      left: "28px",
      transform: "translateY(-50%)",
      fontSize: "33.5px",
      color: "white",
      lineHeight: "1.1",
      lgDown: {
        left: "8px",
      },
    },
    description: {
      position: "absolute",
      top: "28px",
      right: "28px",
      fontSize: "19.68px",
      color: "white",
      textAlign: "right",
      lineHeight: "1.1",
      lgDown: {
        top: "24%",
        left: "8px",
        textAlign: "left",
        width: "calc(70% - 56px)",
        fontSize: "14.68px",
      },
    },
    time: {
      position: "absolute",
      bottom: "28px",
      right: "28px",
      lgDown: {
        bottom: "25%",
        left: "8px",
        "& > svg": { width: "calc(60% - 56px)", height: "fit-content" },
      },
    },
  },
});

export const Header: React.FC = () => {
  const styles = headerStyles();
  const t = useTranslations("header");

  const ref = useRef<HTMLDivElement>(null);

  return (
    <header className={styles.wrapper} ref={ref}>
      <HeaderAnimationIntro />

      <h1 className={styles.logoContainer}>
        <span className={styles.logo} role="img" aria-label={t("title")}>
          <motion.span
            initial={{
              opacity: 0,
              filter: "blur(30px)",
              transform: "rotate3d(0, 0, 1, -1deg)",
              y: -10,
            }}
            animate={{
              opacity: 1,
              filter: "blur(0px)",
              transform: "rotate3d(0, 0, 1, 0deg)",
              y: 0,
            }}
            transition={{ delay: 3, duration: 1 }}
          >
            <LogoSvg1 />
          </motion.span>
          <motion.span
            initial={{
              opacity: 0,
              filter: "blur(30px)",
              transform: "rotate3d(0, 0, 1, -1deg)",
              y: -10,
            }}
            animate={{
              opacity: 1,
              filter: "blur(0px)",
              transform: "rotate3d(0, 0, 1, 0deg)",
              y: 0,
            }}
            transition={{ delay: 3.4, duration: 1 }}
          >
            <LogoSvg2 />
          </motion.span>
        </span>
      </h1>
      <motion.p
        className={styles.titleJapanese}
        initial={{
          opacity: 0,
        }}
        animate={{
          opacity: 1,
        }}
        transition={{ delay: 5, duration: 1 }}
      >
        <PaltSettingsContainer>{`ライフプロジェクトの\n夜明け前`}</PaltSettingsContainer>
      </motion.p>

      <motion.p
        className={styles.description}
        initial={{
          opacity: 0,
        }}
        animate={{
          opacity: 1,
        }}
        transition={{ delay: 5, duration: 1 }}
      >
        <PaltSettingsContainer>{t("description")}</PaltSettingsContainer>
      </motion.p>

      <motion.time
        className={styles.time}
        role="img"
        aria-label="2024/10/10 - 2024/10/16"
        initial={{
          opacity: 0,
        }}
        animate={{
          opacity: 1,
        }}
        transition={{ delay: 5, duration: 1 }}
      >
        <TimeSvg />
      </motion.time>

      <HeaderHands wrapperRef={ref} />
    </header>
  );
};

const LogoSvg1: React.FC = () => {
  return (
    <svg viewBox="0 0 830 320" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M3.01952 23.5793L3.01952 8.6704L98.5118 8.6704V23.5793L59.0694 23.5793L59.0694 137H42.462L42.462 23.5793L3.01952 23.5793ZM215.346 8.6704L215.346 137H198.738L198.738 77.9306L131.177 77.9306L131.177 137H114.569L114.569 8.6704L131.177 8.6704V63.0218L198.738 63.0218V8.6704L215.346 8.6704ZM323.366 122.091V137L233.913 137L233.913 8.6704L319.78 8.6704V23.5793L250.52 23.5793V63.5879L313.364 63.5879V78.4968L250.52 78.4968L250.52 122.091L323.366 122.091Z"
        fill="white"
      />
      <path
        d="M45.4815 297H14.9089L14.9089 168.67H46.2364C66.8069 168.67 80.3947 168.859 92.8502 177.918C106.627 188.109 116.629 207.924 116.629 232.269C116.629 253.594 109.646 271.712 97.757 283.601C83.9804 297 70.3926 297 45.4815 297ZM31.5162 183.579L31.5162 282.28H49.2559C64.731 282.28 75.488 282.28 84.924 274.354C93.6051 267.182 100.022 251.896 100.022 233.024C100.022 216.605 94.1713 200.375 84.3578 191.694C75.2993 184.145 65.4858 183.579 46.8026 183.579H31.5162ZM147.486 260.011L134.653 297H117.291L163.15 168.67H181.644L226.749 297H208.82L195.987 260.011H147.486ZM191.269 245.668L176.738 203.395C174.284 196.79 172.586 191.506 171.831 188.297H171.642C170.699 191.506 169.189 196.601 166.736 203.584L152.393 245.668H191.269ZM338.223 239.252L357.661 168.67H374.646L337.846 297H324.447L301.8 219.436C299.158 210.189 297.837 204.527 296.705 199.998C295.006 206.792 293.685 211.321 291.421 219.814L269.152 297L255.941 297L217.631 168.67H235.559L255.752 239.629C258.961 250.764 262.169 263.597 263.113 266.994C265.566 257.558 267.831 248.31 270.473 239.252L290.1 168.67H302.932L323.692 239.629C326.9 250.575 330.297 263.03 331.052 266.427C331.052 266.427 335.77 248.122 338.223 239.252ZM407.352 168.67L467.743 254.915C471.706 260.577 476.612 268.126 477.367 269.447H477.556C477.556 269.447 477.179 260.011 477.179 248.688V168.67H493.786V297H477.367L417.354 210.566C413.769 205.471 408.107 196.601 407.352 195.091H407.163C407.163 195.091 407.541 203.395 407.541 210.944V297H390.933V168.67H407.352ZM543.291 232.835C543.291 193.77 565.749 166.406 601.605 166.406C637.274 166.406 659.731 193.77 659.731 232.835C659.731 271.9 637.651 299.265 601.605 299.265C565.749 299.265 543.291 271.9 543.291 232.835ZM560.653 232.835C560.653 264.163 576.128 284.544 601.605 284.544C626.894 284.544 642.369 264.163 642.369 232.835C642.369 201.508 627.083 181.126 601.605 181.126C576.128 181.126 560.653 201.319 560.653 232.835ZM692.021 297H675.414V168.67H760.149V183.391H692.021V223.399H753.544V238.119H692.021V297Z"
        fill="white"
      />
    </svg>
  );
};

const LogoSvg2: React.FC = () => {
  return (
    <svg
      width="830"
      height="293"
      viewBox="0 0 830 293"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M95.1149 114.091L95.1149 129L14.9089 129L14.9089 0.670398L31.705 0.670398L31.705 114.091L95.1149 114.091ZM128.641 0.670398L128.641 129H112.033L112.033 0.670398L128.641 0.670398ZM165.648 129H149.04L149.04 0.670398L233.775 0.670398V15.3905L165.648 15.3905V55.3992L227.17 55.3992V70.1194L165.648 70.1194L165.648 129ZM340.734 114.091V129L251.281 129L251.281 0.670398L337.148 0.670398V15.5793L267.888 15.5793V55.5879L330.732 55.5879V70.4968L267.888 70.4968V114.091L340.734 114.091Z"
        fill="white"
      />
      <path
        d="M31.705 234.271L31.705 289H14.9089L14.9089 160.67H62.655C75.488 160.67 82.6594 161.991 88.6984 164.445C101.909 170.295 110.212 181.241 110.212 197.471C110.212 211.436 103.796 222.004 93.6051 228.043C84.3578 233.516 74.9218 234.271 60.5791 234.271H31.705ZM31.705 175.391L31.705 219.551H62.4663C71.7136 219.551 76.0542 218.796 80.5834 217.286C89.642 213.889 93.2277 207.284 93.2277 197.471C93.2277 187.657 89.642 181.052 80.5834 177.655C76.0542 176.145 71.7136 175.391 62.4663 175.391H31.705ZM142.19 234.082L142.19 289H125.583L125.583 160.67H173.895C186.728 160.67 194.277 162.18 200.316 164.445C213.338 169.729 221.264 181.241 221.264 197.471C221.264 218.041 207.487 230.308 188.804 233.328L225.038 289H204.279L169.177 234.082H142.19ZM142.19 219.362H171.064C182.954 219.362 188.238 218.23 193.145 216.154C200.316 212.757 204.09 206.341 204.09 197.282C204.09 188.412 199.939 181.618 192.767 178.41C188.049 176.523 182.954 175.391 170.876 175.391H142.19V219.362ZM230.664 224.835C230.664 185.77 253.122 158.406 288.979 158.406C324.647 158.406 347.105 185.77 347.105 224.835C347.105 263.9 325.024 291.265 288.979 291.265C253.122 291.265 230.664 263.9 230.664 224.835ZM248.027 224.835C248.027 256.163 263.502 276.544 288.979 276.544C314.267 276.544 329.742 256.163 329.742 224.835C329.742 193.508 314.456 173.126 288.979 173.126C263.502 173.126 248.027 193.319 248.027 224.835ZM384.408 160.67H401.015V258.239C401.015 268.241 399.506 273.714 396.486 278.432C390.258 288.434 377.991 291.265 365.725 291.265C357.798 291.265 353.08 290.321 350.061 289.566V274.469C353.647 275.601 358.553 276.733 364.026 276.733C368.933 276.733 374.972 275.79 379.124 272.393C384.408 268.052 384.408 260.692 384.408 248.425V160.67ZM510.162 274.091V289L420.709 289V160.67L506.576 160.67V175.579L437.316 175.579V215.588L500.16 215.588V230.497L437.316 230.497V274.091L510.162 274.091ZM609.865 252.2L624.963 259.748C615.715 279.375 597.976 291.265 574.386 291.265C540.416 291.265 515.882 266.731 515.882 224.835C515.882 185.77 538.34 158.406 574.386 158.406C597.032 158.406 614.205 169.54 623.83 187.657L609.676 197.282C603.071 181.618 590.804 172.937 574.386 172.937C548.908 172.937 533.245 193.319 533.245 224.835C533.245 256.163 548.908 276.733 574.386 276.733C590.993 276.733 603.26 267.675 609.865 252.2ZM627.911 175.579V160.67H723.404V175.579H683.961V289H667.354V175.579H627.911ZM822.142 179.92L809.876 190.299C801.761 178.788 790.249 173.126 775.34 173.126C759.865 173.126 748.353 180.297 748.353 193.13C748.353 204.642 755.147 208.983 770.999 212.946L788.362 217.286C809.498 222.759 825.728 230.308 825.728 253.143C825.728 277.299 804.78 291.265 777.416 291.265C753.26 291.265 735.331 280.13 726.273 265.033L739.861 255.408C745.9 266.731 759.299 276.356 778.359 276.356C795.533 276.356 808.555 268.996 808.555 254.087C808.555 241.443 798.741 236.536 782.323 232.384L766.659 228.421C747.975 223.514 731.557 217.475 731.557 194.64C731.557 171.239 751.939 158.406 775.529 158.406C799.496 158.406 814.405 169.54 822.142 179.92Z"
        fill="white"
      />
    </svg>
  );
};

const TimeSvg: React.FC = () => {
  return (
    <svg
      width="300"
      viewBox="0 0 493 262"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path d="M259.65 249.59H0V250.59H259.65V249.59Z" fill="white" />
      <path
        d="M301.34 261.47H298.12V243.74H291.34V241.2H292.17C294.22 241.2 295.58 240.82 296.57 240.1C297.86 239.15 298.46 237.68 298.54 235.7H301.34V261.47Z"
        fill="white"
      />
      <path
        d="M308.5 248.63C308.5 241.36 311.49 235.26 318.31 235.26C325.13 235.26 328.12 241.32 328.12 248.63C328.12 255.37 325.66 261.93 318.31 261.93C310.96 261.93 308.5 255.41 308.5 248.63ZM311.95 248.55C311.95 254.16 313.35 259.12 318.32 259.12C323.29 259.12 324.69 254.16 324.69 248.55C324.69 242.6 322.76 238.02 318.32 238.02C313.88 238.02 311.95 242.6 311.95 248.55Z"
        fill="white"
      />
      <path
        d="M334.07 243.44V247.8H330.47V243.44H334.07ZM334.07 257.11V261.47H330.47V257.11H334.07Z"
        fill="white"
      />
      <path
        d="M336.42 248.63C336.42 241.36 339.41 235.26 346.23 235.26C353.05 235.26 356.04 241.32 356.04 248.63C356.04 255.37 353.58 261.93 346.23 261.93C338.88 261.93 336.42 255.41 336.42 248.63ZM339.87 248.55C339.87 254.16 341.27 259.12 346.24 259.12C351.21 259.12 352.61 254.16 352.61 248.55C352.61 242.6 350.68 238.02 346.24 238.02C341.8 238.02 339.87 242.6 339.87 248.55Z"
        fill="white"
      />
      <path
        d="M357.26 248.63C357.26 241.36 360.25 235.26 367.07 235.26C373.89 235.26 376.88 241.32 376.88 248.63C376.88 255.37 374.42 261.93 367.07 261.93C359.72 261.93 357.26 255.41 357.26 248.63ZM360.7 248.55C360.7 254.16 362.1 259.12 367.07 259.12C372.04 259.12 373.44 254.16 373.44 248.55C373.44 242.6 371.51 238.02 367.07 238.02C362.63 238.02 360.7 242.6 360.7 248.55Z"
        fill="white"
      />
      <path d="M394.95 249.54V252.84H385.17V249.54H394.95Z" fill="white" />
      <path
        d="M405.03 246.58C404.84 246.16 404.46 244.65 404.46 243.17C404.46 238.93 407.61 235.25 412.99 235.25C418.94 235.25 421.4 239.08 421.4 243.62C421.4 249.42 416.82 253.62 412.42 256.65C411.4 257.33 410.26 258.05 409.31 258.62H421.59V261.46H404.65V258.77C406.85 257.41 410.52 254.6 413.4 252.1C415.9 249.9 418.06 247.4 418.06 243.77C418.06 240.14 415.86 238.09 412.79 238.09C409.42 238.09 407.79 240.33 407.79 243.13C407.79 244.38 408.05 245.67 408.62 246.88L405.02 246.58H405.03Z"
        fill="white"
      />
      <path
        d="M424.08 248.63C424.08 241.36 427.07 235.26 433.89 235.26C440.71 235.26 443.7 241.32 443.7 248.63C443.7 255.37 441.24 261.93 433.89 261.93C426.54 261.93 424.08 255.41 424.08 248.63ZM427.53 248.55C427.53 254.16 428.93 259.12 433.9 259.12C438.87 259.12 440.27 254.16 440.27 248.55C440.27 242.6 438.34 238.02 433.9 238.02C429.46 238.02 427.53 242.6 427.53 248.55Z"
        fill="white"
      />
      <path
        d="M449.66 243.44V247.8H446.06V243.44H449.66ZM449.66 257.11V261.47H446.06V257.11H449.66Z"
        fill="white"
      />
      <path
        d="M452 248.63C452 241.36 454.99 235.26 461.81 235.26C468.63 235.26 471.62 241.32 471.62 248.63C471.62 255.37 469.16 261.93 461.81 261.93C454.46 261.93 452 255.41 452 248.63ZM455.45 248.55C455.45 254.16 456.85 259.12 461.82 259.12C466.79 259.12 468.19 254.16 468.19 248.55C468.19 242.6 466.26 238.02 461.82 238.02C457.38 238.02 455.45 242.6 455.45 248.55Z"
        fill="white"
      />
      <path
        d="M472.84 248.63C472.84 241.36 475.83 235.26 482.65 235.26C489.47 235.26 492.46 241.32 492.46 248.63C492.46 255.37 490 261.93 482.65 261.93C475.3 261.93 472.84 255.41 472.84 248.63ZM476.29 248.55C476.29 254.16 477.69 259.12 482.66 259.12C487.63 259.12 489.03 254.16 489.03 248.55C489.03 242.6 487.1 238.02 482.66 238.02C478.22 238.02 476.29 242.6 476.29 248.55Z"
        fill="white"
      />
      <path
        d="M14.72 37.17H10.15V12.03H0.54V8.43H1.72C4.62 8.43 6.55 7.89 7.95 6.87C9.78 5.53 10.64 3.43 10.74 0.64H14.71V37.16L14.72 37.17Z"
        fill="white"
      />
      <path
        d="M20.68 18.96C20.68 8.65 24.93 0 34.59 0C44.25 0 48.5 8.59 48.5 18.96C48.5 28.52 45.01 37.81 34.59 37.81C24.17 37.81 20.68 28.57 20.68 18.96ZM25.57 18.85C25.57 26.8 27.56 33.84 34.59 33.84C41.62 33.84 43.61 26.8 43.61 18.85C43.61 10.42 40.87 3.92 34.59 3.92C28.31 3.92 25.57 10.42 25.57 18.85Z"
        fill="white"
      />
      <path d="M79.65 0.64L60.42 37.16H56.02L75.3 0.64H79.65Z" fill="white" />
      <path
        d="M42.07 188.22H28.53V113.65H0V102.97H3.5C12.11 102.97 17.84 101.38 21.98 98.35C27.4 94.37 29.95 88.15 30.27 79.87H42.06V188.23L42.07 188.22Z"
        fill="white"
      />
      <path
        d="M59.43 134.2C59.43 103.61 72.02 77.95 100.7 77.95C129.38 77.95 141.97 103.45 141.97 134.2C141.97 162.56 131.61 190.13 100.7 190.13C69.79 190.13 59.43 162.72 59.43 134.2ZM73.94 133.88C73.94 157.46 79.84 178.34 100.71 178.34C121.58 178.34 127.48 157.47 127.48 133.88C127.48 108.86 119.35 89.58 100.71 89.58C82.07 89.58 73.94 108.86 73.94 133.88Z"
        fill="white"
      />
      <path
        d="M332.37 188.22H318.83V113.65H290.31V102.97H293.82C302.42 102.97 308.16 101.38 312.3 98.35C317.72 94.37 320.27 88.15 320.59 79.87H332.38V188.23L332.37 188.22Z"
        fill="white"
      />
      <path
        d="M363.44 158.74C366.47 171.49 375.39 178.34 387.18 178.34C399.77 178.34 411.4 169.58 411.4 150.77C411.4 134.04 399.93 126.07 388.29 126.07C376.65 126.07 368.05 132.44 364.71 144.71L352.92 140.89L358.5 79.86H419.69L418.89 92.29H370.45L367.26 122.41C371.88 118.43 379.69 114.12 390.21 114.12C410.77 114.12 425.59 127.82 425.59 151.09C425.59 174.36 411.09 190.13 386.87 190.13C367.75 190.13 354.52 180.25 350.06 163.68L363.45 158.74H363.44Z"
        fill="white"
      />
      <path
        d="M157.17 168.64V187.57H153.37V168.64H148.92V165.75H153.37V161.35C153.37 157.87 155.02 156.08 158.92 156.08C160.34 156.08 161.35 156.26 161.81 156.36V159.43C161.44 159.38 160.71 159.29 160.02 159.29C158.74 159.29 158.05 159.52 157.64 160.11C157.27 160.66 157.18 161.3 157.18 162.36V165.75H161.81V168.64H157.17Z"
        fill="white"
      />
      <path
        d="M175.55 168.96C175.09 168.87 174.54 168.82 174.13 168.82C170 168.82 167.71 172.49 167.71 176.15V187.56H163.91V165.74H167.71V169.86C168.21 167.34 171.29 165.18 174.31 165.18C174.72 165.18 175.23 165.23 175.55 165.32V168.96Z"
        fill="white"
      />
      <path
        d="M181.55 161.26H177.75V156.4H181.55V161.26ZM181.55 187.57H177.75V165.75H181.55V187.57Z"
        fill="white"
      />
      <path
        d="M435.24 165.76H439.46V157.88L443.26 157.05V165.76H448.07V168.65H443.26V182.17C443.26 183.13 443.3 183.77 443.58 184.23C443.86 184.73 444.36 184.96 445.55 184.96C446.47 184.96 447.34 184.82 448.07 184.68V187.66C446.97 187.93 445.69 188.12 444.27 188.12C442.21 188.12 440.42 187.66 439.73 185.83C439.55 185.33 439.46 184.64 439.46 183.72V168.64H435.24V165.75V165.76Z"
        fill="white"
      />
      <path
        d="M450.27 165.76H454.07V178.32C454.07 180.38 454.3 181.76 454.8 182.72C455.58 184.23 456.95 184.78 459.02 184.78C462.69 184.78 464.57 181.8 464.57 178.27V165.76H468.37V187.58H464.57V184.37C463.38 186.48 461.27 188.13 457.6 188.13C455.35 188.13 453.43 187.49 452.14 186.07C450.76 184.51 450.26 182.95 450.26 178.19V165.77L450.27 165.76Z"
        fill="white"
      />
      <path
        d="M491.48 183.08C490.65 184.36 487.81 188.12 481.85 188.12C475.89 188.12 471.44 183.86 471.44 176.57C471.44 169.88 475.79 165.25 481.8 165.25C488.35 165.25 491.61 170.2 491.61 176.71V177.54H475.29C475.38 181.12 477.4 184.83 482.21 184.83C486.01 184.83 487.94 182.4 488.72 181.12L491.47 183.09L491.48 183.08ZM475.43 174.51H487.67C487.35 170.66 485.24 168.32 481.8 168.32C478.36 168.32 475.84 170.7 475.43 174.51Z"
        fill="white"
      />
      <path
        d="M239.17 119.76L243.07 115.86L265.56 138.35L243.07 160.77L239.17 156.87L254.98 141.06H210.27V135.57H254.98L239.17 119.76Z"
        fill="white"
      />
    </svg>
  );
};
